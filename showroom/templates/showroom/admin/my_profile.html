{% extends 'recycle/user/base.html' %}
{% block title %} {{ user.name }} Profile {% endblock %}
{% load staticfiles %}
{% block contain %}
<div class="content-wrapper">
    <section class="content-header">
        <h1> Dashboard <small>Control panel</small> </h1>
        <ol class="breadcrumb">
            <li><a href="/"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="/user-list/"> My Profile</a></li>
        </ol>
    </section>

	<section class="content">
		<div class="row">
			<div class="col-md-4">
				<div class="box box-primary">
					<div class="box-body box-profile">
						{% if my_profile.user_image %}
							<img src="/static/recycle/media/{{ my_profile.user_image }}" class="profile-user-img img-responsive img-circle" alt="No Image">
						{% else %}
							<img src="{% static 'recycle/admin/img/userimage.jpg' %}" style="height: 100px;width: 112px;    margin-left: 92px;" class="user-image" alt="No Image">
						{% endif %}
						<h3 class="profile-username text-center">{{ my_profile.name }}</h3>
						<p class="text-muted text-center">{{ my_profile.mobile }}</p>
						<ul class="list-group list-group-unbordered">
							<li class="list-group-item">
								<b>My ID </b> <a class="pull-right">{{ my_profile.id }}</a>
							</li>
							<li class="list-group-item">
								<b>Email</b> <a class="pull-right">{{ my_profile.email }}</a>
							</li>
							<li class="list-group-item">
								<b>Registration Date</b> <a class="pull-right">{{ my_profile.reg_date }}</a>
							</li>
						</ul>
						<a href="/edit-profile/" Title="Edit {{ my_profile.name }}" class="btn btn-info btn-block"><b>Edit My Profile</b></a>
					</div>
				</div>
				<div class="box box-primary">
					<div class="box-header with-border">
						<h3 class="box-title">About <a class="pull-right" style="padding-left: 10px;"> {{ user.name }}</a></h3>
					</div>
					<div class="box-body">
						<strong><i class="fa fa-map-marker margin-r-5"></i> Location</strong>
						<p class="text-muted">{{ my_profile.address }}</p>
						<hr>
					</div>
				</div>
			</div>

			<div class="col-md-8">
				<div class="nav-tabs-custom">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#activity" data-toggle="tab">My History</a></li>
						<div class="text-right">
                            <div class="box-header">
                                <a href="/my-dashboard/" title = "User List"><h3 class="box-title"><i class="fa fa-hand-o-right"></i> Go to Dashboard</h3></a>
                            </div>
                        </div>
					</ul>
					<div class="tab-content">
						<div class="active tab-pane" id="activity">
							<div class="post">
								<div class="box-body" style="overflow-x:auto;">
									<table id="example1" class="table table-bordered table-hover">
										<thead>
											<tr style="font-weight: normal">
												<th>SL</th>
												<th>Item Category</th>
												<th>Item Name</th>
												<th>Pick up Date</th>
												<th>Pick up Time</th>
												<th>Product For</th>
												<th>Request Date</th>
												<th>Completed Date</th>
											</tr>
										</thead>

										<tbody>
											{% for data in my_product %}
												<tr style="font-size:12px;">
													<td>{{forloop.counter}}</td>
								   					<td>{{data.category_name}}</td>
													<td>{{data.item_name}}</td>
													<td>{{data.pickup_date}}</td>
													<td>{{data.pickup_time}}</td>
													<td>{{data.get_product_for_display}}</td>
													<td>{{data.request_date|date:"M-d-Y"}}</td>
													{% if data.completed_date %}
														<td style="color:green;">{{data.completed_date|date:"M-d-Y"}}</td>
													{% else %}
														<td style="color:red;">Pending</td>
													{% endif %}
												</tr>
											{% endfor %}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
    </section>
</div>
<script src="{% static 'recycle/admin/bower_components/jquery/dist/jquery.min.js' %}"></script>
<script>
  $(function () {
    $('#example1').DataTable()
    $('#example2').DataTable({
      'paging'      : true,
      'lengthChange': false,
      'searching'   : false,
      'ordering'    : true,
      'info'        : true,
      'autoWidth'   : false
    })
  })
</script>
{% endblock %}